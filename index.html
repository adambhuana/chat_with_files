<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John AI Assistant - CV Selection Helper</title>
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%23ffffff08" points="0,0 1000,300 1000,1000 0,700"/><polygon fill="%23ffffff04" points="0,300 1000,100 1000,400 0,600"/></svg>');
            pointer-events: none;
        }

        .hero-content {
            max-width: 800px;
            z-index: 2;
            position: relative;
        }

        .profile-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 2rem;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            border: 4px solid rgba(255, 255, 255, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .hero-title {
            font-size: 3.5rem;
            color: white;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease-out;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .hero-description {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* CTA Section */
        .cta-section {
            text-align: center;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .chat-prompt {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 600px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .chat-icon {
            font-size: 3rem;
            color: #4ecdc4;
            margin-bottom: 1rem;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .chat-prompt h3 {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .chat-prompt p {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .chat-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, background 0.3s ease;
            cursor: pointer;
        }

        .example-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .example-card i {
            font-size: 2rem;
            color: #4ecdc4;
            margin-bottom: 1rem;
        }

        .example-card h4 {
            color: white;
            margin-bottom: 0.5rem;
        }

        .example-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        /* Features Section */
        .features {
            padding: 4rem 2rem;
            background: rgba(255, 255, 255, 0.05);
        }

        .features-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .features-title {
            font-size: 2.5rem;
            color: white;
            margin-bottom: 3rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-icon {
            font-size: 3rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            color: white;
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            background: rgba(0, 0, 0, 0.2);
            padding: 2rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Chat Controls */
        .chat-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .chat-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(76, 220, 196, 0.3);
        }

        .chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 220, 196, 0.4);
        }

        .chat-btn.secondary {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .chat-btn.secondary:hover {
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        /* Fullscreen Chat */
        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(15px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.4s ease-out;
        }

        .fullscreen-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to { 
                opacity: 1;
                backdrop-filter: blur(15px);
            }
        }

        .fullscreen-chat {
            width: 95%;
            max-width: 900px;
            height: 90%;
            max-height: 800px;
            background: white;
            border-radius: 25px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
            animation: slideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid rgba(76, 220, 196, 0.3);
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: scale(0.7) translateY(100px) rotateX(10deg); 
            }
            to { 
                opacity: 1;
                transform: scale(1) translateY(0) rotateX(0deg); 
            }
        }

        .fullscreen-header {
            background: linear-gradient(135deg, #4ecdc4, #44a08d, #2c3e50);
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .fullscreen-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300"><polygon fill="%23ffffff10" points="0,0 1000,50 1000,300 0,250"/></svg>');
            pointer-events: none;
        }

        .fullscreen-title {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 2;
            position: relative;
        }

        .fullscreen-title i {
            animation: robotPulse 2s ease-in-out infinite;
        }

        @keyframes robotPulse {
            0%, 100% { 
                transform: scale(1);
                color: white;
            }
            50% { 
                transform: scale(1.1);
                color: #ffeb3b;
            }
        }

        .close-fullscreen {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.1rem;
            z-index: 2;
            position: relative;
        }

        .close-fullscreen:hover {
            background: rgba(255, 107, 107, 0.8);
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
        }

        .fullscreen-chat-content {
            height: calc(100% - 80px);
            overflow: hidden;
            position: relative;
            background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
        }

        /* Fullscreen chat iframe styling */
        .fullscreen-chat-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            flex: 1;
        }

        /* Custom chat widget for fullscreen */
        .fullscreen-chat-widget {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .chat-header-custom {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
        }

        .chat-messages-area {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-input-area {
            padding: 1rem;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .chat-input-area input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
        }

        .chat-input-area input:focus {
            border-color: #4ecdc4;
            box-shadow: 0 0 0 3px rgba(76, 220, 196, 0.1);
        }

        .chat-send-btn {
            background: #4ecdc4;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .chat-send-btn:hover {
            background: #44a08d;
            transform: scale(1.1);
        }

        .message {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 20px;
            margin-bottom: 0.5rem;
            animation: messageSlide 0.3s ease-out;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: #4ecdc4;
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }

        .message.bot {
            background: white;
            color: #333;
            border: 1px solid #e9ecef;
            align-self: flex-start;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-style: italic;
            margin: 0.5rem 0;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dots span {
            width: 6px;
            height: 6px;
            background: #4ecdc4;
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Enhanced fullscreen animations */
        .fullscreen-overlay.active .fullscreen-chat {
            animation: enhancedSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes enhancedSlideIn {
            0% { 
                opacity: 0;
                transform: scale(0.6) translateY(200px) rotateY(15deg);
                filter: blur(10px);
            }
            50% {
                opacity: 0.8;
                transform: scale(0.9) translateY(50px) rotateY(5deg);
                filter: blur(2px);
            }
            100% { 
                opacity: 1;
                transform: scale(1) translateY(0) rotateY(0deg);
                filter: blur(0px);
            }
        }

        /* Loading indicator for fullscreen */
        .fullscreen-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            z-index: 10;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(76, 220, 196, 0.3);
            border-top: 3px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #4ecdc4;
            font-weight: 600;
            font-size: 1.1rem;
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* Chat widget styling override */
        .n8n-chat {
            z-index: 1001 !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .chat-examples {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }

            .chat-controls {
                flex-direction: column;
                align-items: center;
            }

            .fullscreen-chat {
                width: 95%;
                height: 95%;
            }
        }

        .fadeInUp {
            animation: fadeInUp 0.8s ease-out both;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-robot"></i> John AI Assistant
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <div class="profile-image">
                <i class="fas fa-user-tie"></i>
            </div>
            
            <h1 class="hero-title">John AI Assistant</h1>
            <h2 class="hero-subtitle">Your Smart CV Selection Helper</h2>
            <p class="hero-description">
                Halo! Saya John, asisten AI yang siap membantu Anda dalam proses seleksi CV dan rekrutmen. 
                Dengan teknologi AI terdepan, saya dapat menganalisis CV, memberikan rekomendasi kandidat terbaik, 
                dan membantu proses hiring Anda menjadi lebih efisien dan akurat.
            </p>

            <!-- CTA Section -->
            <div class="cta-section">
                <div class="chat-prompt">
                    <div class="chat-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>💬 Mulai Konsultasi CV</h3>
                    <p>Klik salah satu topik di bawah atau pilih mode chat yang Anda inginkan untuk mendapatkan bantuan dalam proses seleksi CV Anda!</p>

                    <div class="chat-controls">
                        <button class="chat-btn" onclick="openRegularChat()" title="Buka chat dalam mode widget">
                            <i class="fas fa-comment"></i>
                            Chat Normal
                        </button>
                        <button class="chat-btn secondary" onclick="openFullscreenChat()" title="Buka chat fullscreen (Ctrl+Enter)">
                            <i class="fas fa-expand"></i>
                            Chat Fullscreen
                        </button>
                    </div>
                    
                    <div class="chat-examples">
                        <div class="example-card" onclick="openChatWithMessage('Bagaimana cara menganalisis CV yang baik?')">
                            <i class="fas fa-file-alt"></i>
                            <h4>Analisis CV</h4>
                            <p>Pelajari cara menganalisis dan mengevaluasi CV kandidat secara efektif</p>
                        </div>
                        
                        <div class="example-card" onclick="openChatWithMessage('Apa kriteria kandidat yang ideal untuk posisi ini?')">
                            <i class="fas fa-user-check"></i>
                            <h4>Kriteria Kandidat</h4>
                            <p>Tentukan kriteria dan kualifikasi ideal untuk posisi yang tersedia</p>
                        </div>
                        
                        <div class="example-card" onclick="openChatWithMessage('Bagaimana proses screening CV yang efisien?')">
                            <i class="fas fa-filter"></i>
                            <h4>Screening Process</h4>
                            <p>Optimalisasi proses screening untuk mendapatkan kandidat terbaik</p>
                        </div>
                        
                        <div class="example-card" onclick="openChatWithMessage('Tips wawancara dan evaluasi kandidat')">
                            <i class="fas fa-comments-dollar"></i>
                            <h4>Interview Tips</h4>
                            <p>Dapatkan panduan wawancara dan teknik evaluasi kandidat</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="features-container">
            <h2 class="features-title">🚀 Mengapa Pilih John AI?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>Smart CV Analysis</h3>
                    <p>Analisis CV secara cerdas dengan AI untuk mengidentifikasi kandidat potensial berdasarkan kriteria spesifik.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Candidate Ranking</h3>
                    <p>Sistem scoring otomatis yang memberikan ranking kandidat berdasarkan kesesuaian dengan posisi yang dibutuhkan.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Time Efficiency</h3>
                    <p>Proses seleksi yang lebih cepat dan efisien, menghemat waktu HR hingga 70% dari proses manual.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-target"></i>
                    </div>
                    <h3>Precision Matching</h3>
                    <p>Matching precision tinggi antara requirement pekerjaan dengan background dan skill kandidat.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Bias-Free Selection</h3>
                    <p>Eliminasi bias dalam proses seleksi dengan standar evaluasi yang objektif dan konsisten.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Continuous Learning</h3>
                    <p>Sistem yang terus belajar dari feedback dan data untuk meningkatkan akurasi rekomendasi.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <p>&copy; 2025 John AI Assistant. Powered by Advanced AI Technology.</p>
        <p>Your Partner in Smart Recruitment • Start chatting now!</p>
    </footer>

    <!-- Fullscreen Chat Overlay -->
    <div class="fullscreen-overlay" id="fullscreenOverlay">
        <div class="fullscreen-chat">
            <div class="fullscreen-header">
                <div class="fullscreen-title">
                    <i class="fas fa-robot"></i>
                    John AI Assistant - Fullscreen Mode
                </div>
                <button class="close-fullscreen" onclick="closeFullscreenChat()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="fullscreen-chat-content" id="fullscreenChatContent">
                <!-- Custom fullscreen chat widget will be loaded here -->
                <div class="fullscreen-chat-widget" id="fullscreenChatWidget" style="display: none;">
                    <div class="chat-header-custom">
                        <i class="fas fa-robot"></i> John AI Assistant - CV Selection Helper
                    </div>
                    <div class="chat-messages-area" id="chatMessages">
                        <div class="message bot">
                            <i class="fas fa-robot" style="margin-right: 8px; color: #4ecdc4;"></i>
                            Hi there! 👋 Welcome to fullscreen mode!
                        </div>
                        <div class="message bot">
                            My name is John. How can I assist you with CV selection today?
                        </div>
                        <div class="message bot">
                            🚀 Enjoy the enhanced fullscreen experience with better visibility and interaction!
                        </div>
                    </div>
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        John is typing...
                    </div>
                    <div class="chat-input-area">
                        <input type="text" id="chatInput" placeholder="Type your message here..." maxlength="500">
                        <button class="chat-send-btn" id="chatSendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- N8N Chat Widget -->
    <script type="module">
        import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

        // Regular chat instance
        window.chatInstance = createChat({
            webhookUrl: 'https://n8n-w0kfee8uiagq.arman.sumopod.my.id/webhook/286bf5ce-2090-40dc-972a-308d2bed5465/chat',
            initialMessages: [
                'Hi there! 👋',
                'My name is John. How can I assist you today?'
            ],
            i18n: {
                en: {
                    title: 'Hi there! 👋',
                    subtitle: "Your Assistant to help you get a better person",
                    footer: '',
                    getStarted: 'New Conversation',
                    inputPlaceholder: 'Type your question..',
                },
            },
            theme: {
                primaryColor: '#4ecdc4',
                textColor: '#333',
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
            }
        });

        // Fullscreen chat instance
        let fullscreenChatInstance = null;

        // Function to open regular chat
        window.openRegularChat = function() {
            const chatWidget = document.querySelector('n8n-chat');
            if (chatWidget && chatWidget.shadowRoot) {
                const chatButton = chatWidget.shadowRoot.querySelector('button');
                if (chatButton) {
                    chatButton.click();
                }
            }
        };

        // Function to open fullscreen chat
        window.openFullscreenChat = function() {
            const overlay = document.getElementById('fullscreenOverlay');
            const content = document.getElementById('fullscreenChatContent');
            
            // Show overlay
            overlay.classList.add('active');
            
            // Show loading indicator
            content.innerHTML = `
                <div class="fullscreen-loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Memuat Chat Fullscreen...</div>
                </div>
            `;
            
            // Create fullscreen chat instance if it doesn't exist
            setTimeout(() => {
                if (!fullscreenChatInstance) {
                    fullscreenChatInstance = createChat({
                        target: '#fullscreenChatContent',
                        mode: 'window',
                        webhookUrl: 'https://n8n-deax7yimgqyu.axwy.sumopod.my.id/webhook/286bf5ce-2090-40dc-972a-308d2bed5465/chat',
                        initialMessages: [
                            'Hi there! 👋',
                            'Welcome to fullscreen mode! My name is John. How can I assist you with CV selection today?',
                            '🚀 Enjoy the enhanced chat experience!'
                        ],
                        width: '100%',
                        height: '100%',
                        i18n: {
                            en: {
                                title: 'John AI Assistant - Fullscreen',
                                subtitle: "Enhanced chat experience for better CV consultation",
                                footer: 'Fullscreen mode • Press ESC to exit',
                                getStarted: 'Start Conversation',
                                inputPlaceholder: 'Type your message here...',
                            },
                        },
                        theme: {
                            primaryColor: '#4ecdc4',
                            textColor: '#333',
                            backgroundColor: '#ffffff',
                            borderRadius: '0px',
                        }
                    });
                } else {
                    // If instance exists, just clear loading and show chat
                    content.innerHTML = '';
                    content.appendChild(fullscreenChatInstance.element || document.createElement('div'));
                }
            }, 800);
        };

        // Function to close fullscreen chat
        window.closeFullscreenChat = function() {
            const overlay = document.getElementById('fullscreenOverlay');
            fullscreenChatActive = false;
            overlay.classList.remove('active');
        };

        // Function to open chat with predefined message (enhanced for fullscreen)
        window.openChatWithMessage = function(message) {
            // Check if user prefers fullscreen (you could add user preference storage here)
            const useFullscreen = window.innerWidth > 768; // Use fullscreen on larger screens
            
            if (useFullscreen) {
                openFullscreenChat();
                
                // Send message to fullscreen chat after it loads
                setTimeout(() => {
                    if (fullscreenChatActive) {
                        const chatInput = document.getElementById('chatInput');
                        const chatSendBtn = document.getElementById('chatSendBtn');
                        
                        if (chatInput && chatSendBtn) {
                            chatInput.value = message;
                            chatSendBtn.click();
                        }
                    }
                }, 1500);
            } else {
                // Use regular chat for mobile
                openRegularChat();
                
                setTimeout(() => {
                    const chatWidget = document.querySelector('n8n-chat');
                    if (chatWidget && chatWidget.shadowRoot) {
                        const chatInput = chatWidget.shadowRoot.querySelector('input[type="text"]');
                        if (chatInput) {
                            chatInput.value = message;
                            chatInput.dispatchEvent(new Event('input', { bubbles: true }));
                            
                            const sendButton = chatWidget.shadowRoot.querySelector('button[type="submit"]');
                            if (sendButton) {
                                sendButton.click();
                            }
                        }
                    }
                }, 1000);
            }
        };

        // Enhanced keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Escape to close fullscreen
            if (e.key === 'Escape') {
                closeFullscreenChat();
            }
            
            // Ctrl/Cmd + Enter to open fullscreen chat
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                openFullscreenChat();
            }
            
            // F11 alternative - Ctrl/Cmd + Shift + F for fullscreen
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'F') {
                e.preventDefault();
                openFullscreenChat();
            }
        });

        // Close fullscreen when clicking outside
        document.getElementById('fullscreenOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeFullscreenChat();
            }
        });

        // Add click handlers for smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add floating animation to example cards
        document.querySelectorAll('.example-card').forEach((card, index) => {
            card.style.animationDelay = `${index * 0.1}s`;
            card.classList.add('fadeInUp');
        });

        // Show welcome notification
        setTimeout(() => {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(45deg, #4ecdc4, #44a08d);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                transform: translateX(400px);
                transition: transform 0.3s ease;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                max-width: 320px;
            `;
            notification.innerHTML = `
                <i class="fas fa-robot" style="margin-right: 10px;"></i>
                John AI Assistant siap membantu!<br>
                <small style="opacity: 0.9;">🚀 Coba mode fullscreen untuk pengalaman chat yang lebih baik</small><br>
                <small style="opacity: 0.8; font-size: 0.8rem;">💡 Shortcut: Ctrl+Enter untuk fullscreen</small>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => notification.remove(), 300);
            }, 6000);
        }, 2000);

        // Add some helper functions for better UX
        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            const colors = {
                info: 'linear-gradient(45deg, #4ecdc4, #44a08d)',
                success: 'linear-gradient(45deg, #96ceb4, #a8e6cf)',
                warning: 'linear-gradient(45deg, #ffeb3b, #ffc107)',
                error: 'linear-gradient(45deg, #ff6b6b, #ee5a52)'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 120px;
                right: 20px;
                background: ${colors[type]};
                color: ${type === 'warning' ? '#333' : 'white'};
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 10001;
                box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                transform: translateX(400px);
                transition: transform 0.3s ease;
                font-size: 0.9rem;
                max-width: 300px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        // Enhanced example card interactions
        document.querySelectorAll('.example-card').forEach((card, index) => {
            card.style.animationDelay = `${index * 0.1}s`;
            card.classList.add('fadeInUp');
            
            // Add click feedback
            card.addEventListener('click', function() {
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
                
                showNotification('Membuka chat dengan topik: ' + this.querySelector('h4').textContent, 'info', 2000);
            });
        });

        // Add fullscreen button pulse effect
        const fullscreenBtn = document.querySelector('.chat-btn.secondary');
        if (fullscreenBtn) {
            setInterval(() => {
                if (!fullscreenChatActive) {
                    fullscreenBtn.style.animation = 'pulse 0.8s ease-in-out';
                    setTimeout(() => {
                        fullscreenBtn.style.animation = '';
                    }, 800);
                }
            }, 8000);
        }
    </script>
</body>
</html>
